name: kubernox
namespace: kubernox
network: kubernox_network
extensions:
- name: zipkin
- name: seq
  logPath: ./.logs

services:
- name: kubernox-webui
  project: src/Kubernox.WebUi/Kubernox.WebUi.csproj
  replicas: 1
  bindings:
  - port: 6000

- name: kubernox-service
  project: src/Kubernox.Service.Host/Kubernox.Service.Host.csproj
  replicas: 1
  bindings:
  - port: 6001
  env:
  - name: ASPNETCORE_ENVIRONMENT
    value: Development

# - name: postgres
#   image: postgres
#   bindings:
#   - port: 5432
#   env:
#   - name: POSTGRES_PASSWORD
#     value: postgres

ingress:
  - name: ingress
    bindings:
      - port: 80
        protocol: http
        name: http-redirect
      - port: 443
        protocol: https
        name: https-redirect
    rules:
      - path: /api
        service: kubernox-service
      - path: /hangfire
        service: kubernox-service
      - path: /
        service: kubernox-webui
